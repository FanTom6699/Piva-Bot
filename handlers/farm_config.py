# handlers/farm_config.py

# --- –ö–û–î–´ –î–õ–Ø CALLBACK (–§–∏–∫—Å 64 –±–∞–π—Ç) ---
CROP_CODE_TO_ID = {
    "g": "—Å–µ–º—è_–∑–µ—Ä–Ω–∞", # g = grain (–∑–µ—Ä–Ω–æ)
    "h": "—Å–µ–º—è_—Ö–º–µ–ª—è", # h = hops (—Ö–º–µ–ª—å)
}

# --- –ö–æ—Ä–æ—Ç–∫–∏–µ –∏–º–µ–Ω–∞ –¥–ª—è UI ---
CROP_SHORT = {
    '–∑–µ—Ä–Ω–æ': "üåæ –ó–µ—Ä–Ω–æ",
    '—Ö–º–µ–ª—å': "üå± –•–º–µ–ª—å",
}

# --- –ù–ê–ó–í–ê–ù–ò–Ø –ü–†–ï–î–ú–ï–¢–û–í ---
FARM_ITEM_NAMES = {
    # –†–µ—Å—É—Ä—Å—ã
    '–∑–µ—Ä–Ω–æ': "üåæ –ó–µ—Ä–Ω–æ",
    '—Ö–º–µ–ª—å': "üå± –•–º–µ–ª—å",
    
    # –°–µ–º–µ–Ω–∞
    '—Å–µ–º—è_–∑–µ—Ä–Ω–∞': "–°–µ–º–µ–Ω–∞ üåæ –ó–µ—Ä–Ω–∞",
    '—Å–µ–º—è_—Ö–º–µ–ª—è': "–°–µ–º–µ–Ω–∞ üå± –•–º–µ–ª—è",
}

# --- ‚úÖ‚úÖ‚úÖ –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê (Piva Bot) ‚úÖ‚úÖ‚úÖ ---
# ID –ü—Ä–æ–¥—É–∫—Ç–∞ -> ID –°–µ–º–µ–Ω–∏ (–û–±—Ä–∞—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å)
PRODUCT_TO_SEED_ID = {
    '–∑–µ—Ä–Ω–æ': '—Å–µ–º—è_–∑–µ—Ä–Ω–∞',
    '—Ö–º–µ–ª—å': '—Å–µ–º—è_—Ö–º–µ–ª—è',
}

# ID –°–µ–º–µ–Ω–∏ -> ID –ü—Ä–æ–¥—É–∫—Ç–∞ (–°—Ç–∞—Ä—ã–π —Å–ª–æ–≤–∞—Ä—å, –Ω–æ –Ω—É–∂–µ–Ω –¥–ª—è –°–±–æ—Ä–∞)
SEED_TO_PRODUCT_ID = {
    '—Å–µ–º—è_–∑–µ—Ä–Ω–∞': '–∑–µ—Ä–Ω–æ',
    '—Å–µ–º—è_—Ö–º–µ–ª—è': '—Ö–º–µ–ª—å',
}

# --- ‚ùå‚ùå‚ùå PLANT_IO –£–î–ê–õ–ï–ù. –í—Ä–µ–º—è —Ç–µ–ø–µ—Ä—å –≤ FIELD_UPGRADES ‚ùå‚ùå‚ùå ---

# --- –ü–ò–í–û–í–ê–†–ù–Ø: ID –†–µ—Å—É—Ä—Å–∞ -> –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è 1 –≤–∞—Ä–∫–∏ ---
BREWERY_RECIPE = {
    '–∑–µ—Ä–Ω–æ': 5,
    '—Ö–º–µ–ª—å': 3,
}

# --- –ú–ê–ì–ê–ó–ò–ù: ID –°–µ–º–µ–Ω–∏ -> –¶–µ–Ω–∞ –≤ üç∫ ---
SHOP_PRICES = {
    '—Å–µ–º—è_–∑–µ—Ä–Ω–∞': 2,
    '—Å–µ–º—è_—Ö–º–µ–ª—è': 5,
}

# --- ‚úÖ‚úÖ‚úÖ –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê (Piva Bot) ‚úÖ‚úÖ‚úÖ ---
# --- –£–õ–£–ß–®–ï–ù–ò–Ø: –ü–û–õ–ï ---
# –£—Ä–æ–≤–µ–Ω—å -> {..., grow_time_min: (–°–ª–æ–≤–∞—Ä—å: –ó–µ—Ä–Ω–æ, –•–º–µ–ª—å)}
FIELD_UPGRADES = {
    # Lvl: {cost, time_h, plots, chance_x2, grow_time_min: {–∑–µ—Ä–Ω–æ, —Ö–º–µ–ª—å}}
    1: {'cost': 0,     'time_h': 0, 'plots': 2, 'chance_x2': 0,  'grow_time_min': {'–∑–µ—Ä–Ω–æ': 20, '—Ö–º–µ–ª—å': 40}},
    2: {'cost': 100,   'time_h': 1, 'plots': 2, 'chance_x2': 5,  'grow_time_min': {'–∑–µ—Ä–Ω–æ': 20, '—Ö–º–µ–ª—å': 40}},
    3: {'cost': 250,   'time_h': 2, 'plots': 3, 'chance_x2': 5,  'grow_time_min': {'–∑–µ—Ä–Ω–æ': 18, '—Ö–º–µ–ª—å': 35}}, # –£—Å–∫–æ—Ä–µ–Ω–∏–µ
    4: {'cost': 500,   'time_h': 3, 'plots': 3, 'chance_x2': 10, 'grow_time_min': {'–∑–µ—Ä–Ω–æ': 18, '—Ö–º–µ–ª—å': 35}},
    5: {'cost': 1000,  'time_h': 4, 'plots': 4, 'chance_x2': 10, 'grow_time_min': {'–∑–µ—Ä–Ω–æ': 15, '—Ö–º–µ–ª—å': 30}}, # –£—Å–∫–æ—Ä–µ–Ω–∏–µ
    6: {'cost': 2000,  'time_h': 5, 'plots': 4, 'chance_x2': 15, 'grow_time_min': {'–∑–µ—Ä–Ω–æ': 15, '—Ö–º–µ–ª—å': 30}},
    7: {'cost': 4000,  'time_h': 6, 'plots': 5, 'chance_x2': 15, 'grow_time_min': {'–∑–µ—Ä–Ω–æ': 12, '—Ö–º–µ–ª—å': 25}}, # –£—Å–∫–æ—Ä–µ–Ω–∏–µ
    8: {'cost': 7000,  'time_h': 8, 'plots': 5, 'chance_x2': 20, 'grow_time_min': {'–∑–µ—Ä–Ω–æ': 12, '—Ö–º–µ–ª—å': 25}},
    9: {'cost': 10000, 'time_h': 10, 'plots': 6, 'chance_x2': 25, 'grow_time_min': {'–∑–µ—Ä–Ω–æ': 10, '—Ö–º–µ–ª—å': 20}}, # –£—Å–∫–æ—Ä–µ–Ω–∏–µ
    10:{'cost': 15000, 'time_h': 12, 'plots': 6, 'chance_x2': 35, 'grow_time_min': {'–∑–µ—Ä–Ω–æ': 10, '—Ö–º–µ–ª—å': 20}},
}
# --- --- ---

# --- –£–õ–£–ß–®–ï–ù–ò–Ø: –ü–ò–í–û–í–ê–†–ù–Ø (–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) ---
BREWERY_UPGRADES = {
    # Lvl: {cost, time_h, reward, brew_time_min}
    1:     {'cost': 0,     'time_h': 0, 'reward': 10, 'brew_time_min': 30},
    2:     {'cost': 150,   'time_h': 1, 'reward': 11, 'brew_time_min': 30},
    3:     {'cost': 300,   'time_h': 2, 'reward': 12, 'brew_time_min': 25},
    4:     {'cost': 600,   'time_h': 3, 'reward': 13, 'brew_time_min': 25},
    5:     {'cost': 1200,  'time_h': 4, 'reward': 15, 'brew_time_min': 20},
    6:     {'cost': 2500,  'time_h': 5, 'reward': 17, 'brew_time_min': 20},
    7:     {'cost': 5000,  'time_h': 6, 'reward': 20, 'brew_time_min': 15},
    8:     {'cost': 8000,  'time_h': 8, 'reward': 23, 'brew_time_min': 15},
    9:     {'cost': 12000, 'time_h': 10, 'reward': 27, 'brew_time_min': 10},
    10:    {'cost': 20000, 'time_h': 12, 'reward': 35, 'brew_time_min': 10},
}
# --- --- ---

# --- –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –£–õ–£–ß–®–ï–ù–ò–ô ---
def get_level_data(level: int, upgrade_data: dict) -> dict:
    data = upgrade_data.get(level, {})
    data['max_level'] = (level == max(upgrade_data.keys()))
    
    if not data['max_level']:
        # –î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–≤–Ω–µ, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
        next_level_data = upgrade_data.get(level + 1, {})
        data['next_cost'] = next_level_data.get('cost')
        data['next_time_h'] = next_level_data.get('time_h')
    
    return data
