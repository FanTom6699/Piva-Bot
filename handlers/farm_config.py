# handlers/farm_config.py
# (ÐÐžÐ’Ð«Ð™ Ð¤ÐÐ™Ð› Ð´Ð»Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ "Circular Import")

# --- 1. Ð¡Ð›ÐžÐ’ÐÐ Ð¬ "ÐŸÐžÐÐ¯Ð¢ÐÐ«Ð¥" ÐÐÐ—Ð’ÐÐÐ˜Ð™ (Ð´Ð»Ñ /farm, /shop, /give) ---
FARM_ITEM_NAMES = {
    'Ð·ÐµÑ€Ð½Ð¾': "ðŸŒ¾ Ð—ÐµÑ€Ð½Ð¾ (Ð£Ñ€Ð¾Ð¶Ð°Ð¹)",
    'Ñ…Ð¼ÐµÐ»ÑŒ': "ðŸŒ± Ð¥Ð¼ÐµÐ»ÑŒ (Ð£Ñ€Ð¾Ð¶Ð°Ð¹)",
    'ÑÐµÐ¼Ñ_Ð·ÐµÑ€Ð½Ð°': "ðŸŒ¾ Ð¡ÐµÐ¼Ñ Ð—ÐµÑ€Ð½Ð°",
    'ÑÐµÐ¼Ñ_Ñ…Ð¼ÐµÐ»Ñ': "ðŸŒ± Ð¡ÐµÐ¼Ñ Ð¥Ð¼ÐµÐ»Ñ",
}

# --- 2. ÐšÐžÐÐ¡Ð¢ÐÐÐ¢Ð« ÐœÐÐ“ÐÐ—Ð˜ÐÐ (Ð´Ð»Ñ /shop) ---
SHOP_PRICES = {
    # item_id (Ð¸Ð· database.py) : Ð¦ÐµÐ½Ð° Ð² ðŸº
    "ÑÐµÐ¼Ñ_Ð·ÐµÑ€Ð½Ð°": 2,
    "ÑÐµÐ¼Ñ_Ñ…Ð¼ÐµÐ»Ñ": 5,
}
# (SHOP_NAMES Ð½Ð°Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð½ÑƒÐ¶ÐµÐ½, Ð¼Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ FARM_ITEM_NAMES)

# --- 3. Ð¡Ð›ÐžÐ’ÐÐ Ð¬ "ÐŸÐžÐ¡ÐÐ”ÐšÐ˜" (Ð´Ð»Ñ /farm) ---
PLANT_IO = {
    # 'ÑÐµÐ¼Ñ_Ñ‡ÐµÐ³Ð¾': ('ÑƒÑ€Ð¾Ð¶Ð°Ð¹_Ñ‡ÐµÐ³Ð¾', Ð²Ñ€ÐµÐ¼Ñ_Ñ€Ð¾ÑÑ‚Ð°_Ð²_Ð¼Ð¸Ð½ÑƒÑ‚Ð°Ñ…)
    'ÑÐµÐ¼Ñ_Ð·ÐµÑ€Ð½Ð°': ('Ð·ÐµÑ€Ð½Ð¾', 10),
    'ÑÐµÐ¼Ñ_Ñ…Ð¼ÐµÐ»Ñ': ('Ñ…Ð¼ÐµÐ»ÑŒ', 20),
}

# --- 4. Ð¡Ð›ÐžÐ’ÐÐ Ð¬ "Ð Ð•Ð¦Ð•ÐŸÐ¢ ÐŸÐ˜Ð’ÐžÐ’ÐÐ ÐÐ˜" (Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹, Ð£Ñ€. 1) ---
BREWERY_RECIPE = {
    # 'Ñ€ÐµÑÑƒÑ€Ñ': ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾
    'Ð·ÐµÑ€Ð½Ð¾': 3,
    'Ñ…Ð¼ÐµÐ»ÑŒ': 2,
}

# --- 5. ÐŸÐ ÐÐ™Ð¡-Ð›Ð˜Ð¡Ð¢ Ð£Ð›Ð£Ð§Ð¨Ð•ÐÐ˜Ð™ (ÐÐÐ¨ ÐŸÐ›ÐÐ 10 Ð£Ð ÐžÐ’ÐÐ•Ð™) ---

# 5.1. ÐŸÐžÐ›Ð• (Ð£Ñ‡Ð°ÑÑ‚ÐºÐ¸ / Ð¨Ð°Ð½Ñ x2)
FIELD_UPGRADES = {
    # Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ: (Ð¦ÐµÐ½Ð° ðŸº, Ð’Ñ€ÐµÐ¼Ñ â³ (Ñ‡Ð°ÑÑ‹), ÐšÐ¾Ð»-Ð²Ð¾ Ð£Ñ‡Ð°ÑÑ‚ÐºÐ¾Ð², Ð¨Ð°Ð½Ñ x2 (0-100))
    1: (0, 0, 2, 0),
    2: (5000, 1, 2, 5),
    3: (15000, 2, 3, 5),
    4: (30000, 4, 3, 10),
    5: (75000, 8, 4, 10),
    6: (150000, 12, 4, 15),
    7: (300000, 16, 5, 15),
    8: (500000, 20, 5, 20),
    9: (750000, 24, 6, 20),
    10: (1500000, 48, 6, 25),
}

# 5.2. ÐŸÐ˜Ð’ÐžÐ’ÐÐ ÐÐ¯ (ÐÐ°Ð³Ñ€Ð°Ð´Ð° ðŸº / Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ â³)
BREWERY_UPGRADES = {
    # Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ: (Ð¦ÐµÐ½Ð° ðŸº, Ð’Ñ€ÐµÐ¼Ñ â³ (Ñ‡Ð°ÑÑ‹), ÐÐ°Ð³Ñ€Ð°Ð´Ð° ðŸº, Ð’Ñ€ÐµÐ¼Ñ Ð’Ð°Ñ€ÐºÐ¸ (Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹/Ð¿Ð¾Ñ€Ñ†Ð¸Ñ))
    1: (0, 0, 35, 15),
    2: (8000, 1, 40, 14),
    3: (20000, 2, 45, 13),
    4: (50000, 4, 50, 12),
    5: (100000, 8, 60, 10),
    6: (200000, 12, 70, 9),
    7: (400000, 16, 80, 8),
    8: (600000, 20, 90, 7),
    9: (1000000, 24, 100, 6),
    10: (2000000, 48, 120, 5),
}

# --- 6. Ð’ÑÐ¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ (ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð£Ñ€Ð¾Ð²Ð½Ñ) ---
# (ÐžÐ½Ð° Ñ‚Ð¾Ð¶Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð¶Ð¸Ñ‚ÑŒ Ð·Ð´ÐµÑÑŒ, Ð° Ð½Ðµ Ð² farm.py)
from typing import Dict, Any

def get_level_data(level: int, upgrade_table: dict) -> Dict[str, Any]:
    """Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ Ñ Ð±Ð¾Ð½ÑƒÑÐ°Ð¼Ð¸ Ð´Ð»Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ."""
    if level > max(upgrade_table.keys()):
        level = max(upgrade_table.keys()) # Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ "Ð£Ñ€. 11"
        
    data = upgrade_table[level]
    
    if upgrade_table == FIELD_UPGRADES:
        return {'cost': data[0], 'time_h': data[1], 'plots': data[2], 'chance_x2': data[3], 'max_level': level == max(upgrade_table.keys())}
    elif upgrade_table == BREWERY_UPGRADES:
        return {'cost': data[0], 'time_h': data[1], 'reward': data[2], 'brew_time_min': data[3], 'max_level': level == max(upgrade_table.keys())}
    return {}
